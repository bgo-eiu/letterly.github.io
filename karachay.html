<html>
    <head>
        <title>Karachay-Balkar Text Converter</title>
        <style>
            body{
                background-color: lightblue;
            }
            h1,h2{
                text-align: center;
            }
            textarea{
                margin-left: 5%;
                margin-right: 5%;
                width: 39%;
                font-size: 24px;
                height: 600px;
                resize: none;
                border-radius: 4px;
                background-color: lightblue;
                border: 5px solid black;
                outline: none;
            }
            textarea::placeholder{
                color: black;
            }
            *{
                font-family: 'Verdana';
            }
            p{
                padding-left: 20%;
                padding-right: 20%;
            }
            #section div{
                float: left;
                border: 1px solid black;
                border-radius: 2px;
                margin: 3px;
                padding: 3px;
                font-size: 24px;
            }
        </style>
    </head>
    <body>
        <h1>Karachay-Balkar Transliterator</h1>
        <p>The goal of this website is to allow users to convert text between the Karachay-Balkar Cyrillic alphabet (mostly used in Russia) and the Karachay-Balkar Latin alphabet (mostly used in Turkey). Hopefully this will allow for a greater exchange of communication and literature.</p>
        <textarea id="cyrillic" placeholder="Write something in Къарачай-Малкъар here :)" spellcheck="false"></textarea>
        <textarea  direction="rtl" id="latin" placeholder="Or write something in Qaraçay-Malqar here :)" spellcheck="false"></textarea>
        <h1>Conversion Chart</h1>
        <div id="section">
            <div>a / а</div>
            <div>b / б</div>
            <div>c / дж</div>
            <div>ç / ч</div>
            <div>d / д</div>
            <div>e / е</div>
            <div>e / э (word-initially)</div>
            <div>f / ф</div>
            <div>g / г</div>
            <div>ğ / гъ</div>
            <div>h / х</div>
            <div>ı / ы</div>
            <div>i / и</div>
            <div>j / ж</div>
            <div>k / к</div>
            <div>l / л</div>
            <div>m / м</div>
            <div>n / н</div>
            <div>ñ / нг</div>
            <div>o / о</div>
            <div>ö / ё</div>
            <div>p / п</div>
            <div>q / къ</div>
            <div>r / р</div>
            <div>s / с</div>
            <div>ş / ш</div>
            <div>şç / щ</div>
            <div>t / т</div>
            <div>ts / ц</div>
            <div>u / у</div>
            <div>ü / ю</div>
            <div>v / в</div>
            <div>w / у (after vowel)</div>
            <div>y / й</div>
            <div>ya / я</div>
            <div>z / з</div>
        </div>
    </body>
    <script>
        var typingTimer
        var doneTypingInterval = 1000
        var $cyrillic = document.getElementById("cyrillic")
        var $latin = document.getElementById("latin")
        $cyrillic.addEventListener('keyup', cyrillicFunction);
        $latin.addEventListener('keyup', latinFunction);


        function cyrillicFunction () {
            cyrillic = $cyrillic.value
            for(e of cyrillicKey) cyrillic = cyrillic.replace(new RegExp(e[0], 'g'), e[1])
            $latin.value = cyrillic
        }

        function latinFunction () {
            latinText = $latin.value
            for(e of latinKey) latinText = latinText.replace(new RegExp(e[0], 'g'), e[1])
            $cyrillic.value = latinText
        }

        cyrillicKey = []
        lang = "karachay"
        function setKey(lang){

            cyrillicKey = [
                ["Э", "E"],
                ["э", "e"],
                ["Еу", "Ew"],
                ["еу", "ew"],
                ["Дж", "C"],
                ["дж", "c"],
                ["Къ", "Q"],
                ["къ", "q"],
                ["Уу", "Uw"],
                ["уу", "uw"],
                ["Гъ", "Ğ"],
                ["гъ", "ğ"],
                [" Е", " Ye"],
                [" е", " ye"],
                ["Я", "Ya"],
                ["я", "ya"],
                ["НГ", "Ñ"],
                ["нг", "ñ"],
                ["Аь", "Ä"],
                ["аь", "ä"],
                ["Оь", "Ö"],
                ["оь", "ö"],
                ["Уь", "Ü"],
                ["уь", "ü"],
                ["Нъ", "Ñ"],
                ["нъ", "ñ"],
                ["Ц", "Ts"],
                ["ц", "ts"],
                ["Ё", "Ö"],
                ["ё", "ö"],
                ["Ю", "Ü"],
                ["ю", "ü"],
                ["А", "A"],
                ["а", "a"],
                ["Б", "B"],
                ["б", "b"],
                ["В", "V"], 
                ["в", "v"], 
                ["Ч", "Ç"],
                ["ч", "ç"],
                ["Ж", "J"],
                ["ж", "j"],
                ["Д", "D"],
                ["д", "d"],
                ["Ф", "F"],
                ["ф", "f"],
                ["Г", "G"],
                ["г", "g"],
                ["И", "İ"],
                ["и", "i"],
                ["Й", "Y"],
                ["й", "y"],
                ["К", "K"],
                ["к", "k"],
                ["Л", "L"],
                ["л", "l"],
                ["М", "M"],
                ["м", "m"],
                ["Н", "N"],
                ["н", "n"],
                ["О", "O"],
                ["о", "o"],
                ["П", "P"],
                ["п", "p"],
                ["Р", "R"],
                ["р", "r"],
                ["С", "S"],
                ["с", "s"],
                ["Щ", "Şç"],
                ["щ", "şç"],
                ["Ш", "Ş"],
                ["ш", "ş"],
                ["Т", "T"], 
                ["т", "t"], 
                ["У", "U"],
                ["у", "u"],
                ["Х", "H"],
                ["х", "h"],
                ["З", "Z"],
                ["з", "z"],
                ["Ы", "I"],
                ["ы", "ı"],
            ]

        }

        console.log(cyrillicKey)

        const reverse = object => JSON.parse(`[${object.map(x => `["${x[1]}", "${x[0]}"]`).join(",")}]`);
        latinKey = reverse(cyrillicKey)

    </script>
</html>